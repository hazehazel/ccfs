function convertText(){let t=document.getElementById("text_wrap"),e=document.getElementById("result"),n=document.getElementById("result_preview"),r=document.querySelector("#option_more"),o=t.value,a=transformAndInlineStyles(o,{defaultColor:"#888888",extraCSS:""}),i='<div class="ccf-wrap">';r.checked&&(i+=`<div data-ke-type="moreLess" data-text-more="더보기" data-text-less="닫기"><a class="btn-toggle-moreless">더보기</a>
    <div class="moreless-content">`),i+=`${a}</div>`,r.checked&&(i+=`</div>
    </div>`),e.value=i,n.innerHTML=i}function copyToClipboard(){let t=document.getElementById("result");t.select(),document.execCommand("copy"),alert("복사가 완료되었습니다. HTML 에디터에 붙여넣기하세요.")}function rgbToHex(t){let e=t.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(!e)return null;let n=t=>Number(t).toString(16).padStart(2,"0");return`#${n(e[1])}${n(e[2])}${n(e[3])}`.toLowerCase()}function extractColorHex(t){if(!t)return null;let e=t.match(/color\s*:\s*([^;]+)/i);if(!e)return null;let n=e[1].trim();if(n.startsWith("#")){if(4===n.length&&(n=`#${[1,2,3].map(t=>n[t]+n[t]).join("")}`),7===n.length)return n.toLowerCase()}else if(/^rgba?\(/i.test(n))return rgbToHex(n);return null}function contrastTextColor(t){let e=t.replace("#",""),n=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return(299*n+587*r+114*o)/1e3>=160?"#000000":"#ffffff"}function transformAndInlineStyles(t,e={}){let n=(e.defaultColor||"#888888").toLowerCase(),r=e.extraCSS||"",o=new DOMParser().parseFromString(t,"text/html"),a=Array.from(o.body.querySelectorAll("p")),i=new Set;for(let l of a){let p=extractColorHex(l.getAttribute("style")||"")||n,c=p.replace("#",""),s=`c-${c}`;i.add(p);let m=l.querySelectorAll("span"),f=(m[1]?.textContent||"").trim(),d=(m[2]?.textContent||"").replace(/\s+/g," ").trim(),u=o.createElement("p");u.className=s;let x=o.createElement("span");x.className="name",x.textContent=f;let g=o.createElement("span");g.className="text",g.textContent=d,u.append(x,g),l.replaceWith(u)}let y=[".ccf-wrap p {font-size: 14px; display: flex !important; align-items: flex-start !important; gap: 5px !important; margin: 10px 0 !important; line-height: 1.4 !important;}",".ccf-wrap .name {display: inline-flex !important; align-items: center !important; justify-content: center !important; position: relative !important; min-width: fit-content !important; padding: 3px 5px !important; z-index: 1 !important;}",'.ccf-wrap .name::before {content: "" !important; display: flex !important; position: absolute !important; left: 0 !important; width: 100% !important; height: 100% !important; background-color: currentColor !important; opacity: 0.7 !important; z-index: -1 !important;}',".ccf-wrap .text {display: inline-flex !important; align-items: center !important; justify-content: center !important; position: relative !important; padding: 3px 0 !important; height: 100% !important;}"];i.forEach(t=>{let e=t.replace("#",""),n=contrastTextColor(t);y.push(`.ccf-wrap .c-${e} .name::before{background-color:${t} !important;} `),y.push(`.ccf-wrap .c-${e} .name{color:${n} !important;}`)});let $=`<style>${y.join("")}${r}</style>`,h=o.body.innerHTML;return`${$}${h}`}